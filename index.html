<!DOCTYPE html>
<html lang="zh-TW">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>EXAM</title>
	<link rel="stylesheet" href="../css/materialize.min.css">
	<script src="../js/materialize.min.js"></script>
	<style>
		body{font-family:'Microsoft JhengHei', '微軟正黑體', sans-serif;color:#ccc;background-color:#40464b}
		ol.ansOp{list-style-type:upper-alpha}
	</style>
</head>
<body>
	<ol id="exm"></ol>
<script>
document.addEventListener('DOMContentLoaded', function(){
	doPost({op:'qshow', mode:1, qn:4});	// mode 1: 循序顯示; mode 2: 隨機顯示; qn:題目數量
});
function doPost(data){
	const formData = new FormData();
	for (let ndx in data)
		formData.append(ndx, data[ndx]);

	let xhr = new XMLHttpRequest();
	xhr.onload = function(){
		if (xhr.status >= 200 && xhr.status < 300) {
			let posts = JSON.parse(xhr.responseText);
			for (let i = 0; i < posts.total; i++){
				let exm = document.createElement('li');
				let ansCount = (posts.rows[i].ans5 == null) ? 4 : 5;
				let ans = '<p class="question">' + posts.rows[i].question + '</p><ol class="ansOp">';
				for (let j = 1; j <= ansCount; j++)
					ans += '<li><label><input type="radio" name="answer'+ i +'" value=' + j + ' class="with-gap"><span>' + posts.rows[i]['ans' + j] +'</span></label></li>';
				exm.innerHTML = ans + '</ol>';
				document.getElementById('exm').append(exm);
			}
		} else {
			console.log(xhr.responseText);
		}
	};
	xhr.open('POST', 'act.php', true);
	xhr.send(formData);
}
function _(el){
	return document.querySelector(el);
}
// window.post = function(data) {
// 	const formData = new FormData();
// 	for (var ndx in data)
// 		formData.append(ndx, data[ndx]);
// 	return fetch('act.php', {method:'POST', body:formData}).then(res => {console.log(res.json())});
// }
</script>
</body>
</html>